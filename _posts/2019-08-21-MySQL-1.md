---
layout : post
title : MySQL CRUD 작업 하는법
subtitle : CRUD
categories : development
tags : mysql
comments : true
---

# CREATE
몽고디비는 컬렉션에 컬럼을 정의하지 않아도 된다.

몽고디비의 자료형은 MySQL과 조금 다르다. 몽고디비는 기본적으로 자바스크립트 문법을 사용한다.

Date나 정규표현식 같은 자바스크립트 객체를 자료형으로 사용할 수 있고, Bianry Data, ObjecteId, Int, Long, Decimal, Timestamp, JavaScript 등의 추가적인 자료형이 있다. Undefined와 Symbol은 자료형으로 사용되지 않는다.

추가적인 자료형 중에서 ObjectId와 Binary Data, Timestamp 외에는 잘 사용되지 않는다. ObjectId는 MySQL에서 기본키로 쓰이는 값과 비슷한 역할이라고 한다.

#### db.컬렉션명.save(다큐먼트)
- 다큐먼트를 생성하는 명령어. 자바스크립트 객체처럼 생성하면 된다. 성공적으로 수행되면 WriteResult({"nInserted": 1}) 이라는 응답이 온다. 다큐먼트 한 개가 생성되었다는 의미이고, 실패하면 에러 내용이 응답으로 온다.

# READ

#### db.컬렉션명.find()
- 컬렉션 내의 다큐먼트를 조회하는 명령어이다.<br>넘기는 인자의 개수와 내용에 따라 결과가 다르다.

    1. 첫 번째 인자 : 조건을 넣을 수 있다. 빈 객체를 넣으면 전체 다큐먼트를 조회한다. 또한 특수한 연산자가 사용된다.<br>
    $gt : 초과, $gte : 이상, $lt : 미만, $lte : 이하, $ne : 같지 않음, $or : 또는, $in 배열 요소 중 하나

    2. 두 번째 인자 : 특정 필드만 조회할 때 넣어주면 된다. 1 또는 true로 표시한 필드만 조회한다.<br>예를 들어 {_id : 0, name : 1, married : 1} 을 넣어주면, name과 married만 조회한다. _id는 항상 기본적으로 조회되므로 필요하지 않을 경우 0 또는 false로 표시해 가져오지 않도록 해야한다.

    3. 추가 메소드 : sort 메소드를 통해서 정렬을 할 수 있다. -1은 내림차순, 1은 오름차순이다.<br>limit 메소드를 통해서 조회할 다큐먼트의 개수를 설정할 수 있다.<br>skip 메소드를 통해서 몇 개를 건너뛸지 설정할 수도 있다.

        db.users.find({}, {_id : 0, name : 1, age : 1}).sort({age : 1});<br>
        name과 age를 조회하고, age를 기준으로 오름차순 정렬하여 출력한다.

        db.users.find({}, {_id : 0, name : 1, age : 1}).sort({age : 1}).limit(1).skip(1);<br>
        name과 age를 조회하고, age를 기준으로 오름차순 정렬하여 출력한다. 단, 1개의 다큐먼트를 뛰어넘고, 1개의 다큐먼트를 출력한다.

# UPDATE

#### db.컬렉션명.update()
- 기존의 데이터를 수정하는 명령어이다. 넘기는 인자의 개수와 내용에 따라 수정 결과가 다르다.
    1. 첫 번째 인자 : 수정할 다큐먼트를 지정할 조건이 담긴 객체를 넣는다.

    2. 두 번째 인자 : 수정할 내용이 담긴 객체를 넣는다.<br>
    $set이라는 연산자로 특정 필드만 수정할 수 있다.

    수정에 성공했다면 첫 번째 객체에 해당하는 다큐먼트 수, 수정된 다큐먼트 수가 나온다.

# DELETE

#### db.컬렉션명.remove()
- 데이터를 삭제하는 명령어이다. 삭제할 다큐먼트에 대한 정보가 담긴 객체를 첫 번째 인자로 제공하면 성공 시 삭제된 개수가 반환된다.